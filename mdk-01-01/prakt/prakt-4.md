# Техническое задание: Информационная система управления библиотекой

## Описание проекта

Разработать информационную систему управления библиотекой на Python с использованием SQLite. Система должна управлять каталогом книг и читателей, выполнять операции CRUD (Create, Read, Update, Delete), поддерживать поиск и фильтрацию данных, а также реализовывать функционал выдачи и возврата книг с учетом статуса доступности. Проект должен быть реализован в среде CodeSandbox с использованием современного синтаксиса Python и соблюдением стандартов оформления кода (PEP 8).

## Цели проекта

1. Ознакомить студентов с основами работы с базами данных SQLite.
    
2. Научить реализовывать CRUD-операции, поиск, фильтрацию и управление выдачей книг.
    
3. Развить навыки проектирования архитектуры приложения.
    
4. Закрепить стандарты написания чистого кода.
    

## Функциональные требования

### 1. Основные функции системы

- **Управление книгами**:
    
    - Создание: Добавление новой книги (название, автор, год издания, ISBN, статус доступности).
        
    - Чтение: Просмотр списка всех книг или конкретной книги по ID или ISBN.
        
    - Обновление: Изменение информации о книге (название, автор, год, статус).
        
    - Удаление: Удаление книги из каталога.
        
- **Управление читателями**:
    
    - Создание: Добавление нового читателя (имя, email, номер читательского билета).
        
    - Чтение: Просмотр списка всех читателей или конкретного читателя по ID или номеру билета.
        
    - Обновление: Изменение информации о читателе (имя, email).
        
    - Удаление: Удаление читателя (только если у него нет выданных книг).
        
- **Выдача и возврат книг**:
    
    - Выдача книги: Связывание книги с читателем, обновление статуса is_available на FALSE.
        
        - Проверка, что книга доступна.
            
        - Проверка, что читатель существует.
            
    - Возврат книги: Обновление статуса is_available на TRUE, удаление связи книги с читателем.
        
    - Хранение информации о выдаче в таблице loans.
        
- **Поиск и фильтрация**:
    
    - Поиск книг по:
        
        - Название (частичное совпадение, без учета регистра).
            
        - Автор (частичное совпадение, без учета регистра).
            
        - ISBN (точное совпадение).
            
    - Фильтрация книг по:
        
        - Статус доступности (is_available = TRUE/FALSE).
            
        - Год издания (диапазон, например, 2000–2020).
            
    - Поиск читателей по:
        
        - Имя (частичное совпадение).
            
        - Номер читательского билета (точное совпадение).
            
    - Результаты поиска и фильтрации отображаются в консоли с полной информацией.
        

### 2. База данных

- Использовать SQLite для хранения данных.
    
- Создать таблицы:
    
    - **Таблица** books:
        
        - id: Уникальный идентификатор (INTEGER, PRIMARY KEY, AUTOINCREMENT).
            
        - title: Название книги (TEXT, NOT NULL).
            
        - author: Автор книги (TEXT, NOT NULL).
            
        - publication_year: Год издания (INTEGER, NOT NULL).
            
        - isbn: ISBN книги (TEXT, UNIQUE, NOT NULL).
            
        - is_available: Статус доступности (BOOLEAN, DEFAULT TRUE).
            
    - **Таблица** users:
        
        - id: Уникальный идентификатор (INTEGER, PRIMARY KEY, AUTOINCREMENT).
            
        - name: Имя читателя (TEXT, NOT NULL).
            
        - email: Email читателя (TEXT, NOT NULL, UNIQUE).
            
        - library_card: Номер читательского билета (TEXT, UNIQUE, NOT NULL).
            
    - **Таблица** loans:
        
        - id: Уникальный идентификатор (INTEGER, PRIMARY KEY, AUTOINCREMENT).
            
        - book_id: ID книги (INTEGER, FOREIGN KEY references books(id)).
            
        - user_id: ID читателя (INTEGER, FOREIGN KEY references users(id)).
            
        - loan_date: Дата выдачи (TEXT, NOT NULL, формат ISO 8601, например, "2025-04-16").
            

### 3. Интерфейс

- Реализовать консольный интерфейс для взаимодействия с пользователем.
    
- Меню с командами:
    
    - Добавить книгу.
        
    - Просмотреть все книги.
        
    - Найти книгу по ID или ISBN.
        
    - Поиск книг по названию или автору.
        
    - Фильтрация книг по году или статусу доступности.
        
    - Добавить читателя.
        
    - Просмотреть всех читателей.
        
    - Найти читателя по имени или номеру билета.
        
    - Выдать книгу читателю.
        
    - Вернуть книгу.
        
    - Обновить данные книги или читателя.
        
    - Удалить книгу или читателя.
        
    - Выход из программы.
        

## Нефункциональные требования

1. **Код**:
    
    - Соблюдать стандарт PEP 8 для именования переменных, функций и классов.
    - Структурировать код с разделением на модули (database.py, crud.py, search.py, loans.py, main.py).
        
2. **Обработка ошибок**:
    
    - Обрабатывать исключения при работе с базой данных (дублирование ISBN, email, library_card).
        
    - Проверять пользовательский ввод (валидность года, ISBN, email, непустые строки).
        
    - Проверять наличие выданных книг перед удалением читателя.
        
3. **Документация**:
    
    - Добавить docstrings для всех функций и модулей.
        
    - Включить комментарии для сложных участков кода.
        
4. **Архитектура**:
    
    - Разделить логику на слои: доступ к данным (database), бизнес-логика (crud, search, loans), пользовательский интерфейс (main).
        
    - Использовать функции и/или классы для инкапсуляции логики.
        

## Технические требования

- **Язык**: Python 3.10+.
    
- **Библиотеки**: sqlite3 (встроенная), без внешних зависимостей.
    
- **Среда**: CodeSandbox (Python-окружение).
    
- **Структура проекта**:
    
    ```
    library_system/
    ├── database.py     # Логика работы с SQLite
    ├── crud.py         # Реализация CRUD-операций
    ├── search.py       # Реализация поиска и фильтрации
    ├── loans.py        # Логика выдачи и возврата книг
    ├── main.py         # Консольный интерфейс и основная логика
    └── library.db      # Файл базы данных SQLite
    ```
    
## Примерный план реализации

1. **database.py**:
    
    - Функция initialize_database(): Создание таблиц books, users, loans.
        
    - Функции для подключения/закрытия соединения с базой данных.
        
2. **crud.py**:
    
    - Функции для книг: create_book(), read_books(), read_book_by_id(), read_book_by_isbn(), update_book(), delete_book().
        
    - Функции для читателей: create_user(), read_users(), read_user_by_id(), read_user_by_card(), update_user(), delete_user().
        
    - Аннотации типов и обработка ошибок.
        
3. **search.py**:
    
    - Функции search_by_title(), search_by_author(), filter_by_year(), filter_by_availability(), search_user_by_name(), search_user_by_card().
        
    - Обработка частичного совпадения для текстовых полей.
        
4. **loans.py**:
    
    - Функции loan_book(), return_book() для выдачи/возврата книг.
        
    - Проверка доступности книги и существования читателя.
        
5. **main.py**:
    
    - Консольное меню с циклом while для обработки команд.
        
    - Валидация ввода (ISBN, email, год).
        
    - Вызов функций из crud.py, search.py, loans.py.
        

## Критерии оценки

1. **Корректность работы всех CRUD-операций, поиска, фильтрации, выдачи и возврата книг.**
    
2. **Соблюдение стандартов PEP 8 и использование аннотаций типов.**
    
3. **Качество обработки ошибок и валидации ввода.**
    
4. **Четкое разделение логики на модули.**
    
5. **Наличие документации (docstrings, комментарии).**
    
6. **Удобство пользовательского интерфейса.**
    

### Оценка 2 (неудовлетворительно)

- Реализована только часть CRUD-операций для книг или читателей.
    
- Отсутствует функционал выдачи/возврата книг, поиска и фильтрации.
    
- Код не структурирован, нет разделения на модули.
    
- Много ошибок в синтаксисе или логике.
    
- Игнорируются стандарты PEP 8, нет аннотаций типов.
    
- Отсутствует обработка ошибок и валидация ввода.
    
- Нет документации.
    

### Оценка 3 (удовлетворительно)

- Реализованы все CRUD-операции для книг и читателей, но есть незначительные ошибки.
    
- Реализован базовый функционал выдачи/возврата книг и поиск (например, только по названию) без фильтрации.
    
- Код частично структурирован, но модули могут быть неоптимально организованы.
    
- Соблюдаются основные правила PEP 8, но есть нарушения.
    
- Используются аннотации типов в некоторых функциях.
    
- Минимальная обработка ошибок (например, только для базы данных).
    
- Есть базовые docstrings, но они неполные.
    

### Оценка 4 (хорошо)

- Все CRUD-операции, выдача/возврат книг работают корректно.
    
- Реализованы поиск (по названию, автору, имени читателя) и фильтрация (по году или статусу).
    
- Код структурирован по модулям с четким разделением логики.
    
- Соблюдаются стандарты PEP 8, используются аннотации типов для большинства функций.
    
- Хорошая обработка ошибок (например, для базы данных и пользовательского ввода).
    
- Полные docstrings для функций и модулей, есть комментарии для сложных участков.
    
- Удобный интерфейс с понятным меню.
    

### Оценка 5 (отлично)

- Все CRUD-операции, поиск, фильтрация, выдача/возврат книг работают безупречно.
    
- Реализованы дополнительные улучшения (например, поиск по нескольким критериям, валидация ISBN/email, форматированный вывод).
    
- Код идеально структурирован, модули логически разделены.
    
- Полное соблюдение PEP 8, аннотации типов для всех функций.
    
- Комплексная обработка ошибок и валидация ввода (например, проверка формата ISBN, email, года).
    
- Подробная документация (docstrings, комментарии, возможно, README).
    
- Интерфейс интуитивно понятен, вывод результатов хорошо отформатирован.
    
## Рекомендации 

- Изучите документацию по модулю sqlite3 в Python.
    
- Ознакомьтесь с PEP 8 и используйте линтер (например, встроенный в CodeSandbox).
    
- Тестируйте каждую функцию отдельно перед интеграцией.
    
- Используйте try-except для обработки возможных ошибок ввода или базы данных.
    
- Регулярно сохраняйте проект в CodeSandbox.

## Ожидаемый результат

Работающая консольная программа, которая позволяет управлять каталогом книг и читателей, хранящихся в SQLite, с функционалом поиска, фильтрации, выдачи и возврата книг, удобным интерфейсом и надежной обработкой ошибок.